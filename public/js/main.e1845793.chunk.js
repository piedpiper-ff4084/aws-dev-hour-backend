(this["webpackJsonpaws-dev-hour"]=this["webpackJsonpaws-dev-hour"]||[]).push([[0],{147:function(e,t,s){},150:function(e,t,s){},214:function(e,t,s){"use strict";s.r(t);var a=s(6),r=s.n(a),n=s(9),c=s(4),i=s.n(c),o=s(117),l=s.n(o),d=(s(145),s(146),s(147),s(5)),h=s(74),j=s(13),u=s(130),p=s(57),m=s(118),b=s(128),f=(s(150),s(0));class O extends c.Component{render(){const e=this.props.auth,t=e.user,s=e.isAuthenticated;return Object(f.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[Object(f.jsx)("div",{className:"navbar-brand",children:Object(f.jsx)("a",{className:"navbar-item",href:"/",children:Object(f.jsx)("img",{src:"devhour-logo.png",width:"112",height:"28",alt:"aws logo"})})}),Object(f.jsxs)("div",{id:"navbarBasicExample",className:"navbar-menu",children:[Object(f.jsxs)("div",{className:"navbar-start",children:[Object(f.jsx)("a",{href:"/",className:"navbar-item",children:"Home"}),Object(f.jsx)("a",{href:"/photos",className:"navbar-item",children:"Photos"}),Object(f.jsx)("a",{href:"/admin",className:"navbar-item",children:"Admin"}),Object(f.jsx)("a",{href:"/profile",className:"navbar-item",children:"Profile"})]}),Object(f.jsx)("div",{className:"navbar-end",children:Object(f.jsxs)("div",{className:"navbar-item",children:[s&&t&&Object(f.jsxs)("p",{children:["Cognito ID: ",t.username]}),Object(f.jsxs)("div",{className:"buttons",children:[!s&&Object(f.jsxs)("div",{children:[Object(f.jsx)("a",{href:"/register",className:"button is-primary",children:Object(f.jsx)("strong",{children:"Register"})}),Object(f.jsx)("a",{href:"/login",className:"button is-light",children:"Log in"})]}),s&&Object(f.jsx)("a",{href:"/",onClick:e=>{e.preventDefault(),this.props.handleLogOut()},className:"button is-light",children:"Log out"})]})]})})]})]})}}function x(){return Object(f.jsx)("section",{className:"hero is-primary",children:Object(f.jsx)("div",{className:"hero-body",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("img",{src:"devhour-banner.jpg",alt:"AWS DEV Hour"})})})})}function g(){return Object(f.jsx)("section",{className:"container",children:Object(f.jsxs)("div",{className:"columns features",children:[Object(f.jsx)("div",{className:"column is-4",children:Object(f.jsx)("div",{className:"card is-shady",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h4",{children:"We use Amazon Rekognition"}),Object(f.jsx)("p",{children:"Amazon Rekognition makes it easy to add image and video analysis to your applications using proven, highly scalable, deep learning technology that requires no machine learning expertise to use. With Amazon Rekognition, you can identify objects, people, text, scenes, and activities in images and videos, as well as detect any inappropriate content. Amazon Rekognition also provides highly accurate facial analysis and facial search capabilities that you can use to detect, analyze, and compare faces for a wide variety of user verification, people counting, and public safety use cases."}),Object(f.jsx)("p",{children:Object(f.jsx)("a",{href:"https://aws.amazon.com/rekognition/",children:"Learn more"})})]})})})}),Object(f.jsx)("div",{className:"column is-4",children:Object(f.jsx)("div",{className:"card is-shady",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h4",{children:"Photos stored in Amazon S3"}),Object(f.jsx)("p",{children:"Amazon Simple Storage Service (Amazon S3) is an object storage service that offers industry-leading scalability, data availability, security, and performance. This means customers of all sizes and industries can use it to store and protect any amount of data for a range of use cases, such as data lakes, websites, mobile applications, backup and restore, archive, enterprise applications, IoT devices, and big data analytics. Amazon S3 provides easy-to-use management features so you can organize your data and configure finely-tuned access controls to meet your specific business, organizational, and compliance requirements. Amazon S3 is designed for 99.999999999% (11 9's) of durability, and stores data for millions of applications for companies all around the world."}),Object(f.jsx)("p",{children:Object(f.jsx)("a",{href:"https://aws.amazon.com/s3/",children:"Learn more"})})]})})})}),Object(f.jsx)("div",{className:"column is-4",children:Object(f.jsx)("div",{className:"card is-shady",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h4",{children:"Amazon DynamoDB"}),Object(f.jsx)("p",{children:"DynamoDB supports some of the world\u2019s largest scale applications by providing consistent, single-digit millisecond response times at any scale. You can build applications with virtually unlimited throughput and storage. DynamoDB global tables replicate your data across multiple AWS Regions to give you fast, local access to data for your globally distributed applications. For use cases that require even faster access with microsecond latency, DynamoDB Accelerator (DAX) provides a fully managed in-memory cache."}),Object(f.jsx)("p",{children:Object(f.jsx)("a",{href:"https://aws.amazon.com/dynamodb/",children:"Learn more"})})]})})})})]})})}function v(){return Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)(x,{}),Object(f.jsx)("div",{className:"box cta",children:Object(f.jsxs)("p",{className:"has-text-centered",children:[Object(f.jsx)("span",{className:"tag is-primary",children:"NEW"})," Upload your photographs to have objects recognised automatically!"]})}),Object(f.jsx)(g,{})]})}var w=s(83),N=s(116),y=s(119),S=s.n(y),k=s(35);let I=[];function C(e,t){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(r.a.mark((function e(t,s){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(t,{level:"private"});case 2:return a=e.sent,e.next=5,w.a.get(s,{level:"private",bucket:k.s3.thumbBucket});case 5:return n=e.sent,c=[a,n],e.abrupt("return",Promise.resolve(c));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(n.a)(r.a.mark((function e(t){var s,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"imageAPI","/images",s={headers:{"Content-Type":"application/json"},response:!0,queryStringParameters:{action:"getLabels",key:t}},e.next=5,N.a.get("imageAPI","/images",s);case 5:return a=e.sent,n=[a],e.abrupt("return",Promise.resolve(n));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}class A extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={response:"",filelist:"",cognitoSub:"",loaded:!1,pr:""},this.getId=()=>{p.a.currentUserInfo().then((e=>{this.setState({cognitoSub:e.id})}))},this.listImages=Object(n.a)(r.a.mark((function e(){var s,a,n,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){let t="photos/".concat(e),s="private/".concat(n).concat("/photos/").concat(e);C(t,t).then((t=>{let a={original:t[0],thumbnail:t[1],description:"Testing Description",isSelected:!1};I.push(a),P(s).then((t=>{let s=t[0].data;if(s){let t=((e,t)=>t.filter((t=>!t.includes(e))))("private",Object.values(s)).join(" * ");for(let s in I)if(I[s].original.includes(e)){I[s].description=t;break}}}))}))},e.next=3,w.a.list("photos/",{level:"private"});case 3:s=e.sent,a=Object.values(s),n=t.state.cognitoSub,c=a.map((function(e){return e.key.replace("photos/","")})),t.setState({filelist:c}),c.forEach(i),t.setState({pr:!0});case 10:case"end":return e.stop()}}),e)}))),this.componentDidMount=Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getId(),t.listImages(),t.setState({loaded:!0});case 3:case"end":return e.stop()}}),e)})))}render(){return Object(f.jsx)(c.Fragment,{children:Object(f.jsx)("section",{className:"section",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Your Photos"}),Object(f.jsx)("p",{className:"subtitle is-5",children:"Review your photographs and labels"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"columns",children:Object(f.jsx)("div",{className:"column",children:this.state.pr?Object(f.jsx)(S.a,{items:I,thumbnailPosition:"left"}):null})})]})})})}}var D=s(77);const B=i.a.forwardRef(((e,t)=>{let s=e.indeterminate,a=Object(h.a)(e,["indeterminate"]);const r=i.a.useRef(),n=t||r;return i.a.useEffect((()=>{n.current.indeterminate=s}),[n,s]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("input",Object(d.a)({type:"checkbox",ref:n},a))})})),R=[{Header:"Filename",accessor:"key"},{Header:"Last Modified",accessor:"lastModified"},{Header:"Size",accessor:"size"}],z=e=>{const t=Object(c.useMemo)((()=>R),[]),s=Object(D.useTable)({columns:t,data:e.filelist},D.useSortBy,D.useRowSelect,(e=>{e.visibleColumns.push((e=>[{key:"selection",Header:({getToggleAllRowsSelectedProps:e})=>Object(f.jsx)(B,Object(d.a)({},e())),Cell:({row:e})=>Object(f.jsx)(B,Object(d.a)({},e.getToggleRowSelectedProps()))},...e]))})),a=s.getTableProps,r=s.getTableBodyProps,n=s.headerGroups,i=s.rows,o=s.prepareRow,l=s.selectedFlatRows;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("table",Object(d.a)(Object(d.a)({},a()),{},{style:{border:"solid 1px blue"},children:[Object(f.jsx)("thead",{children:n.map((e=>Object(f.jsx)("tr",Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((e=>Object(f.jsxs)("th",Object(d.a)(Object(d.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{style:{borderBottom:"solid 8px #ff9900",background:"#1b233c",color:"white",fontWeight:"bold"},children:[e.render("Header"),Object(f.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}),e.id)))}),e.id)))}),Object(f.jsx)("tbody",Object(d.a)(Object(d.a)({},r()),{},{children:i.map((e=>(o(e),(e=>Object(f.jsx)("tr",Object(d.a)(Object(d.a)({},e.getRowProps()),{},{children:e.cells.map((e=>Object(f.jsx)("td",Object(d.a)(Object(d.a)({},e.getCellProps()),{},{style:{padding:"10px",border:"solid 1px gray",background:"white"},children:e.render("Cell")}),e.id)))}),e.id))(e))))}))]})),Object(f.jsxs)("p",{children:["Selected Rows: ",Object.keys(l).length]}),Object(f.jsx)("pre",{children:Object(f.jsx)("code",{children:JSON.stringify({selectedFlatRows:l.map((e=>e.original))},null,2)})}),Object(f.jsx)("button",{onClick:()=>e.deleteImages(l.map((e=>e.original))),children:" Delete Images "})]})};z.defaultProps={filelist:[{key:"no files detected",lastModified:"not detected due to no file",size:"0"}]};function T(e){return{key:e.key.replace("photos/",""),lastModified:e.lastModified.toString(),size:function(e){if(0==e)return"0 Byte";let t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(e.size).toString()}}class H extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={imageName:"",imageFile:"",response:"",tableData:[],loaded:"false",uploading:"false",identity:[]},this.deleteImages=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.identity,"imageAPI","/images",c=t,e.next=6,Promise.all(s.map(function(){var e=Object(n.a)(r.a.mark((function e(t){var s,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.key,n="private/".concat(a,"/photos/").concat(s),i={headers:{"Content-Type":"application/json"},response:!0,queryStringParameters:{action:"deleteImage",key:n}},e.next=5,N.a.del("imageAPI","/images",i);case 5:c.setState((e=>({tableData:e.tableData.reduce((function(e,t){return t.key!==s&&e.push(t),e}),[])})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.uploadImage=()=>{w.a.put("photos/".concat(this.upload.files[0].name),this.upload.files[0],{contentType:this.upload.files[0].type,level:"private"}).then((()=>{this.upload=null,this.setState((()=>({response:"Success uploading file!"}))),this.listImages()})).catch((e=>{this.setState({response:"Cannot uploading file: ".concat(e)})}))},this.listImages=()=>{w.a.list("photos/",{level:"private"}).then((e=>{const t=Object.values(e).map(T);this.setState({tableData:t}),this.setState({loaded:!0})}))},this.componentDidMount=()=>{this.listImages(),p.a.currentUserInfo().then((e=>{this.setState({identity:e.id})}))}}render(){return Object(f.jsx)(c.Fragment,{children:Object(f.jsx)("section",{className:"section",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("h2",{children:"Upload a new photo"}),Object(f.jsx)("input",{type:"file",accept:"image/png, image/jpeg",style:{display:"none"},ref:e=>this.upload=e,onChange:()=>this.setState({imageFile:this.upload.files[0],imageName:this.upload.files[0].name})}),Object(f.jsx)("input",{value:this.state.imageName,placeholder:"Select file",onChange:e=>{this.handleChange(e)}}),Object(f.jsx)("button",{onClick:()=>{this.upload.value=null,this.upload.click()},loading:this.state.uploading,children:"Browse"}),Object(f.jsx)("button",{onClick:this.uploadImage,children:" Upload File "}),!!this.state.response&&Object(f.jsx)("div",{children:this.state.response})]}),Object(f.jsx)("br",{}),this.state.loaded&&Object(f.jsx)(z,{filelist:this.state.tableData,deleteImages:this.deleteImages})]})})})}}class F extends c.Component{constructor(...e){super(...e),this.state={email:"",cognitoID:"",username:"",loading:!0}}componentDidMount(){p.a.currentUserInfo().then((e=>{this.setState({email:e.attributes.email,cognitoID:e.id,username:e.username,loading:!1})}))}render(){return Object(f.jsx)(c.Fragment,{children:Object(f.jsx)("section",{className:"section",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Profile Admin"}),Object(f.jsx)("p",{className:"subtitle is-5",children:"Manage your user profile below:"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"columns",children:Object(f.jsxs)("div",{className:"column is-one-third",children:[Object(f.jsx)("form",{action:"/ChangePassword",children:Object(f.jsx)("input",{type:"submit",value:"Change Password"})}),Object(f.jsx)("br",{}),this.state.loading?Object(f.jsx)("span",{children:"Loading... "}):Object(f.jsxs)("span",{children:[Object(f.jsxs)("h2",{children:[Object(f.jsx)("strong",{children:"Username:"})," ",this.state.username]}),Object(f.jsxs)("h2",{children:[Object(f.jsx)("strong",{children:"Email Address:"})," ",this.state.email]}),Object(f.jsxs)("h2",{children:[Object(f.jsx)("strong",{children:"Cognito ID: "})," ",this.state.cognitoID]})]})]})})]})})})}}var M=function(e){return e.formerrors&&(e.formerrors.blankfield||e.formerrors.passwordmatch)?Object(f.jsxs)("div",{className:"error container help is-danger",children:[Object(f.jsx)("div",{className:"row justify-content-center",children:e.formerrors.passwordmatch?"Password value does not match confirm password value":""}),Object(f.jsx)("div",{className:"row justify-content-center help is-danger",children:e.formerrors.blankfield?"All fields are required":""})]}):e.apierrors?Object(f.jsx)("div",{className:"error container help is-danger",children:Object(f.jsx)("div",{className:"row justify-content-center",children:e.apierrors})}):e.formerrors&&e.formerrors.cognito?Object(f.jsx)("div",{className:"error container help is-danger",children:Object(f.jsx)("div",{className:"row justify-content-center",children:e.formerrors.cognito.message})}):Object(f.jsx)("div",{})};var U=function(e,t){const s=document.getElementsByClassName("is-danger");for(let a=0;a<s.length;a++)s[a].classList.contains("error")||s[a].classList.remove("is-danger");return t.username&&""===t.username.trim()?(document.getElementById("username").classList.add("is-danger"),{blankfield:!0}):t.firstname&&""===t.firstname.trim()?(document.getElementById("firstname").classList.add("is-danger"),{blankfield:!0}):t.lastname&&""===t.lastname.trim()?(document.getElementById("lastname").classList.add("is-danger"),{blankfield:!0}):t.email&&""===t.email.trim()?(document.getElementById("email").classList.add("is-danger"),{blankfield:!0}):t.verificationcode&&""===t.verificationcode.trim()?(document.getElementById("verificationcode").classList.add("is-danger"),{blankfield:!0}):t.password&&""===t.password.trim()?(document.getElementById("password").classList.add("is-danger"),{blankfield:!0}):t.oldpassword&&""===t.oldpassword.trim()?(document.getElementById("oldpassword").classList.add("is-danger"),{blankfield:!0}):t.newpassword&&""===t.newpassword.trim()?(document.getElementById("newpassword").classList.add("is-danger"),{blankfield:!0}):t.confirmpassword&&""===t.confirmpassword.trim()?(document.getElementById("confirmpassword").classList.add("is-danger"),{blankfield:!0}):t.password&&t.confirmpassword&&t.password!==t.confirmpassword?(document.getElementById("password").classList.add("is-danger"),document.getElementById("confirmpassword").classList.add("is-danger"),{passwordmatch:!0}):t.newpassword&&t.confirmpassword&&t.newpassword!==t.confirmpassword?(document.getElementById("newpassword").classList.add("is-danger"),document.getElementById("confirmpassword").classList.add("is-danger"),{passwordmatch:!0}):void 0};class _ extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={username:"",password:"",errors:{cognito:null,blankfield:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1}})},this.handleSubmit=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,t.props.handleLogIn(t.state.username,t.state.password);case 7:t.props.history.push("/"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),n=null,n=e.t0.message?e.t0:{message:e.t0},t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),{},{cognito:n})});case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Log in"}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{className:"input",type:"text",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username or email",value:this.state.username,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"password",placeholder:"Password",value:this.state.password,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("a",{href:"/forgotpassword",children:"Forgot password?"})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Login"})})})]})]})})}}var V=_;class W extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={username:"",email:"",password:"",confirmpassword:"",errors:{cognito:null,blankfield:!1,passwordmatch:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1,passwordmatch:!1}})},this.handleSubmit=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,n,c,i,o,l,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),n=t.state,c=n.username,i=n.email,o=n.password,e.prev=5,e.next=8,p.a.signUp({username:c,password:o,attributes:{email:i}});case 8:l=e.sent,console.log(l),t.props.history.push("/verify",{username:c}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),h=null,h=e.t0.message?e.t0:{message:e.t0},t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),{},{cognito:h})});case 18:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Register"}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{className:"input",type:"text",id:"username","aria-describedby":"userNameHelp",placeholder:"Enter username",value:this.state.username,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(f.jsx)("input",{className:"input",type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-envelope"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"password",placeholder:"Password",value:this.state.password,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"confirmpassword",placeholder:"Confirm password",value:this.state.confirmpassword,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("a",{href:"/forgotpassword",children:"Forgot password?"})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Register"})})})]})]})})}}var q=W;class Y extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={email:"",errors:{cognito:null,blankfield:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1}})},this.forgotPasswordHandler=function(){var e=Object(n.a)(r.a.mark((function e(s){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,p.a.forgotPassword(t.state.email);case 7:t.props.history.push("/forgotpasswordverification"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Forgot your password?"}),Object(f.jsx)("p",{children:"Please enter the email address associated with your account and we'll email you a password reset link."}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.forgotPasswordHandler,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(f.jsx)("input",{type:"email",className:"input",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-envelope"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("a",{href:"/forgotpassword",children:"Forgot password?"})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Submit"})})})]})]})})}}var G=Y;class J extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={verificationcode:"",email:"",newpassword:"",errors:{cognito:null,blankfield:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1}})},this.passwordVerificationHandler=function(){var e=Object(n.a)(r.a.mark((function e(s){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,p.a.forgotPasswordSubmit(t.state.email,t.state.verificationcode,t.state.newpassword);case 7:t.props.history.push("/changepasswordconfirmation"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Set new password"}),Object(f.jsx)("p",{children:"Please enter the verification code sent to your email address below, your email address and a new password."}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.passwordVerificationHandler,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{type:"text",className:"input",id:"verificationcode","aria-describedby":"verificationCodeHelp",placeholder:"Enter verification code",value:this.state.verificationcode,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.email,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-envelope"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{type:"password",className:"input",id:"newpassword",placeholder:"New password",value:this.state.newpassword,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Submit"})})})]})]})})}}var K=J;class Q extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={oldpassword:"",newpassword:"",confirmpassword:"",errors:{cognito:null,blankfield:!1,passwordmatch:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1,passwordmatch:!1}})},this.handleSubmit=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,p.a.currentAuthenticatedUser();case 7:return n=e.sent,console.log(n),e.next=11,p.a.changePassword(n,t.state.oldpassword,t.state.newpassword);case 11:t.props.history.push("/changepasswordconfirmation"),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(4),c=null,c=e.t0.message?e.t0:{message:e.t0},t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),{},{cognito:c})}),console.log(c);case 20:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Change Password"}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"oldpassword",placeholder:"Old password",value:this.state.oldpassword,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"newpassword",placeholder:"New password",value:this.state.newpassword,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsxs)("p",{className:"control has-icons-left",children:[Object(f.jsx)("input",{className:"input",type:"password",id:"confirmpassword",placeholder:"Confirm password",value:this.state.confirmpassword,onChange:this.onInputChange}),Object(f.jsx)("span",{className:"icon is-small is-left",children:Object(f.jsx)("i",{className:"fas fa-lock"})})]})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("a",{href:"/forgotpassword",children:"Forgot password?"})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Change password"})})})]})]})})}}var X=Q;class $ extends c.Component{render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Change Password"}),Object(f.jsx)("p",{children:"Your password has been successfully updated!"})]})})}}var Z=$;function ee(){return setTimeout((()=>{window.location.href="/login"}),5e3),Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Welcome!"}),Object(f.jsx)("p",{children:"You have successfully registered a new account."}),Object(f.jsxs)("p",{children:["You will be redirected to the login page shortly. If you are not redirected within 5 seconds, ",Object(f.jsx)("a",{href:"/login",children:"click here"})]})]})})}function te(){return Object(f.jsx)("footer",{className:"footer",children:Object(f.jsx)("div",{className:"content has-text-centered",children:Object(f.jsx)("p",{children:"This software is distributed under the Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0)"})})})}class se extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={username:"",verificationcode:"",errors:{cognito:null,blankfield:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1}})},this.handleSubmit=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,p.a.confirmSignUp(t.state.username,t.state.verificationcode);case 7:t.props.history.push("/welcome"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),n=null,n=e.t0.message?e.t0:{message:e.t0},t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),{},{cognito:n})});case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}componentDidMount(){const e=this.props.location.state;e&&e.username&&this.setState({username:e.username})}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Verification"}),Object(f.jsx)("p",{children:"We've sent you a email with a confirmation code. Please fill out the form below with the code."}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{className:"input",type:"text",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",value:this.state.username,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{className:"input",type:"text",id:"verificationcode","aria-describedby":"verificationcodeHelp",placeholder:"Enter Verification Code",value:this.state.verificationcode,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("a",{href:"/resendverification",children:"Re-send verification code?"})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Verify account"})})})]})]})})}}var ae=se;class re extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={username:"",errors:{cognito:null,blankfield:!1}},this.clearErrorState=()=>{this.setState({errors:{cognito:null,blankfield:!1}})},this.handleSubmit=function(){var e=Object(n.a)(r.a.mark((function e(s){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),t.clearErrorState(),(a=U(s,t.state))&&t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),a)}),e.prev=4,e.next=7,p.a.resendSignUp(t.state.username);case 7:t.props.history.push("/verify",{username:t.state.username}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),n=null,n=e.t0.message?e.t0:{message:e.t0},t.setState({errors:Object(d.a)(Object(d.a)({},t.state.errors),{},{cognito:n})});case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),this.onInputChange=e=>{this.setState({[e.target.id]:e.target.value}),document.getElementById(e.target.id).classList.remove("is-danger")}}render(){return Object(f.jsx)("section",{className:"section auth",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("h1",{children:"Resend verification code"}),Object(f.jsx)(M,{formerrors:this.state.errors}),Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("input",{className:"input",type:"text",id:"username","aria-describedby":"usernameHelp",placeholder:"Enter username",value:this.state.username,onChange:this.onInputChange})})}),Object(f.jsx)("div",{className:"field",children:Object(f.jsx)("p",{className:"control",children:Object(f.jsx)("button",{className:"button is-success",children:"Resend Verify code"})})})]})]})})}}var ne=re;m.a.add(b.a);const ce=e=>{let t=e.component,s=e.loggedIn,a=e.verified,r=e.path,n=Object(h.a)(e,["component","loggedIn","verified","path"]);const c=e=>Object(f.jsx)(j.b,Object(d.a)(Object(d.a)({path:r},n),{},{render:e})),i=(e,t)=>c((()=>Object(f.jsx)(j.a,{to:{pathname:e,state:{prevLocation:r,error:t}}})));return s?a?c((e=>Object(f.jsx)(t,Object(d.a)({},e)))):i("/verify","You need to verify your account first!"):i("/login","You need to login first!")};class ie extends c.Component{constructor(...e){var t;super(...e),t=this,this.state={isAuthenticated:!1,isAuthenticating:!0,isVerified:!1,user:null},this.handleLogOut=Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.signOut();case 3:t.setState({user:null,isAuthenticated:!1,isAuthenticating:!1,isVerified:!1}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),this.handleLogIn=function(){var e=Object(n.a)(r.a.mark((function e(s,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.signIn(s,a);case 3:n=e.sent,console.log(n),t.setState({user:n,isAuthenticated:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.code&&"UserNotConfirmedException"===e.t0.code&&(window.location.href="/verify"),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,s){return e.apply(this,arguments)}}()}componentDidMount(){var e=this;return Object(n.a)(r.a.mark((function t(){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.currentSession();case 3:return s=t.sent,e.setState({isAuthenticated:!0}),console.log(s),t.next=8,p.a.currentAuthenticatedUser();case 8:a=t.sent,e.setState({user:a}),a.attributes.email_verified&&e.setState({isVerified:!0}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),"No current user"!==t.t0&&console.log(t.t0);case 16:e.setState({isAuthenticating:!1});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()}render(){const e={isAuthenticated:this.state.isAuthenticated,user:this.state.user};return!this.state.isAuthenticating&&Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(u.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{auth:e,handleLogOut:this.handleLogOut}),Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",render:t=>Object(f.jsx)(v,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(ce,{path:"/photos",loggedIn:this.state.isAuthenticated,verified:this.state.isVerified,component:A}),Object(f.jsx)(ce,{path:"/admin",loggedIn:this.state.isAuthenticated,verified:this.state.isVerified,component:H}),Object(f.jsx)(ce,{path:"/profile",loggedIn:this.state.isAuthenticated,verified:this.state.isVerified,component:F}),Object(f.jsx)(j.b,{exact:!0,path:"/admin",render:t=>Object(f.jsx)(H,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/login",render:t=>Object(f.jsx)(V,Object(d.a)(Object(d.a)({},t),{},{auth:e,handleLogIn:this.handleLogIn}))}),Object(f.jsx)(j.b,{exact:!0,path:"/verify",render:t=>Object(f.jsx)(ae,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/resendverification",render:t=>Object(f.jsx)(ne,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/register",render:t=>Object(f.jsx)(q,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/forgotpassword",render:t=>Object(f.jsx)(G,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/forgotpasswordverification",render:t=>Object(f.jsx)(K,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/changepassword",render:t=>Object(f.jsx)(X,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/changepasswordconfirmation",render:t=>Object(f.jsx)(Z,Object(d.a)(Object(d.a)({},t),{},{auth:e}))}),Object(f.jsx)(j.b,{exact:!0,path:"/welcome",render:t=>Object(f.jsx)(ee,Object(d.a)(Object(d.a)({},t),{},{auth:e}))})]}),Object(f.jsx)(te,{})]})})})}}var oe=ie,le=s(25);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));le.default.configure({Auth:{mandatorySignIn:!0,region:k.cognito.REGION,userPoolId:k.cognito.USER_POOL_ID,userPoolWebClientId:k.cognito.APP_CLIENT_ID,identityPoolId:k.cognito.IDENTITY_POOL_ID},Storage:{region:k.cognito.REGION,bucket:k.s3.bucket},API:{endpoints:[{name:"imageAPI",endpoint:k.api.invokeUrl,path:"/images",custom_header:function(){var e=Object(n.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="Bearer ",e.next=3,p.a.currentSession();case 3:return e.t1=e.sent.getIdToken().getJwtToken(),e.t2=e.t0.concat.call(e.t0,e.t1),e.abrupt("return",{Authorization:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]}}),l.a.render(Object(f.jsx)(oe,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},35:function(e){e.exports=JSON.parse('{"api":{"invokeUrl":"https://a8bftmxb5h.execute-api.us-west-2.amazonaws.com/prod/"},"cognito":{"REGION":"us-west-2","USER_POOL_ID":"us-west-2_IGCjQiFKf","APP_CLIENT_ID":"7lcvqa74829vnlspnfpfhkhvg3","IDENTITY_POOL_ID":"us-west-2:2320ee70-a841-4e8e-a8e4-0055083ff6ae"},"s3":{"bucket":"dev-awsdevhourbackendsta-cdkreknimgagebucketabe44-17z36v7oww7qd","thumbBucket":"dev-awsdevhourbackendsta-cdkreknimgagebucketresiz-ax5irmwy9vwq"}}')}},[[214,1,2]]]);
//# sourceMappingURL=main.e1845793.chunk.js.map